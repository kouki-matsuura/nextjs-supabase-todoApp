# Next.js + Vercel + Supabase を用いたアプリ開発

こんにちは！ラクス入社１年目のkoki_matsuraです。

本日は、Next.jsとVercel、Supabaseを用いた簡単なアプリを開発する手順についてお話しできればと思います。

アジェンダは以下の通りです。

- [Next.jsとは](#Next.jsとは)
- [Vercelとは](#Vercelとは)
- [Supabaseとは](#Supabaseとは)
- [ToDoアプリ作成](#ToDoアプリ作成)
  - [Supabaseにデータベースを用意](#Supabaseにデータベースを用意)
  - [VercelでNext.jsプロジェクトを作成・デプロイ・GitHub連携](#VercelでNext.jsプロジェクトを作成・デプロイ・GitHub連携)
  - [VercelとSupabaseの連携](#VercelとSupabaseの連携)
  - [GitHubからクローン](#GitHubからクローン)
  - [CLIからVercelにログイン](#CLIからVercelにログイン)
  - [ライブラリをインストール](#ライブラリをインストール)
  - [コーディング](#コーディング)
  - [完成](#完成)
-  [終わりに](#終わりに)

## Next.jsとは

Next.jsはReactベースのアプリケーションフレームワークです。

公式サイトではNext.jsとはReactを用いたWebアプリ開発で生じる問題を全て解決する言語だと紹介されています。

ReactとNext.jsを比較すると、大きく以下のような違いがあります。
- サーバの有無
  
  これがNext.jsとReactの1番の違いです。
  
  Next.jsはサーバー機能を持っているのですが、Reactはサーバー機能を持っていません。そのため、Next.jsは単体でWEBアプリを動かすことができます。Reactはサーバーを別に用意し、サーバー用のモジュールやディレクトリなどを考えないといけないため、学習のコストが高くなります。
- フレームワークかライブラリか

    Next.jsはアプリケーションフレームワークとしてWEBアプリケーションの土台として使われ、Reactは部分的にDOMの値で表示を変化させることに特化しているViewライブラリとして使われます。

- 部分導入
  
  Next.jsはフレームワークなので、部分導入はできません。一方、ReactはライブラリなのでRuby on RailsやDjangoのフレームワークに取り入れることが可能になっています。


次に、Next.jsは以下のような特徴があります。
- 画像の最適化

    Next.jsにはimgタグの代わりとなるImageタグがあり、これを使うことで画像の次世代フォーマットであるWebPへ自動で変換し、高速に画像を表示することができます。
- ファイルベースルーティング

    通常、WEBページを表示したい場合は特定のフォルダ配下にindex.htmlを配置します。しかし、Next.jsでは導入時点で"pages"というフォルダがあり、その配下にファイルを配置すると自動でパスが生成されます。
- ハイブリッドレンダリング

    ReactではCSR(Client Side Rendering)にのみ対応しています。CSRはページのサイズが大きい時にローディング時間が長くなってしまうというデメリットがあり、SEO的にも悪くなると考えられます。
    
    一方、Next.jsではCSRだけでなく、SSR(Server Side Rendering)にも対応しており、ページごとに個別にレンダリング方法を設定できます。また、プレレンダリングも可能で、最初にページにアクセスする際にHTMLを提供するため、レンダリングの速度を大幅に軽減することが期待できます。
- ファストリフレッシュ

    ソースコードに変更があったときにその箇所のみが再描画する機能です。これにより効率的に開発を進めることができます。


以上のことから、かなりWEBアプリ開発における開発者の手間を省いてくれるフレームワークになっています。

## Vercelとは

Next.jsを開発したVercel Inc.が提供してるホスティングサービスです。GitHubなどのリポジトリと連携することで簡単に作成したWEBアプリを数十秒でデプロイできます。

## Supabaseとは

SupabaseはSupabase Pte. Ltd.が開発している開発者向けオープンソースのデータベースプラットフォームです。

SupabaseはFirebase Alternativeとも言われており、データベースにはPostgresを使っています。テーブル・ビューはPostgresを簡単な操作で扱えます。